{% extends "::base.html.twig" %}

{% set _title = block('title') %}
{% if not _title %}
    {% block title %}{{ (title is defined and title ? title : page_title())|default('Система управления магазином') }}{% endblock %}
{% endif %}

{% set _page_header = block('page_header') %}
{% set _page_breadcrumb = block('page_breadcrumb') %}
{% set _page_menu = block('page_menu') %}
{% set _page_content = block('page_content') %}
{% block body %}
    <div id="wrapper" class="admin-container">
        {% block content %}
            <nav class="navbar-default navbar-static-side admin-menu-container" role="navigation">
                <div class="sidebar-collapse">
                    <ul class="nav" id="side-menu">
                        <li class="nav-header">
                            {{ include("ShopAdminBundle::header.html.twig") }}
                        </li>
                        {{ include("ShopAdminBundle:Default:menuItems.html.twig") }}
                    </ul>
                </div>
            </nav>
            <div id="page-wrapper" class="gray-bg admin-main-container">
                <div class="row border-bottom">
                    <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
                        <div class="navbar-header">
                            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                        </div>
                        <ul class="nav navbar-top-links navbar-right">
                            {% if app.user %}
                            <li>
                                <a href="{{ path('fos_user_security_logout') }}">
                                    <i class="fa fa-sign-out"></i> Выйти
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                </div>
                {% block page_container %}
                    <div class="row wrapper border-bottom white-bg page-heading">
                        <div class="col-lg-12">
                            {% if _page_header or _title %}
                                {% if _page_header %}
                                    <h2>{{ _page_header|raw }}</h2>
                                {% elseif _title %}
                                    <h2>{{ _title }}</h2>
                                {% endif %}
                            {% endif %}
                            {% if _page_breadcrumb %}
                                {{ _page_breadcrumb|raw }}
                            {% else %}
                                {% set _breadcrumbs = page_breadcrumbs() %}
                                {% if _breadcrumbs %}
                                    <ol class="breadcrumb">
                                        {% for breadcrumb in _breadcrumbs %}
                                            {% if breadcrumb.title %}
                                                <li>
                                                    <a href="{{ path(breadcrumb.routeName, breadcrumb.routeParameters) }}">
                                                        {{ breadcrumb.title }}
                                                    </a>
                                                </li>
                                            {% endif %}
                                        {% endfor %}
                                    </ol>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="wrapper wrapper-content">
                        {% if _page_menu and _page_menu|length %}
                            <ul class="nav nav-tabs page-menu">
                                {{ _page_menu|raw }}
                            </ul>
                        {% endif %}
                        {% if _page_content %}
                            {{ _page_content|raw }}
                        {% else %}
                            {{ form(form, { 'style': 'horizontal' }) }}
                        {% endif %}
                    </div>
                {% endblock %}
            </div>
        {% endblock %}
    </div>

    <script type="text/javascript" src="/js/autosize-master/jquery.autosize.min.js"></script>

    <script src="/js/maxlength/jquery.maxlength.min.js"></script>
    <link href="/js/maxlength/jquery.maxlength.css" type="text/css" rel="stylesheet">

    <script>
        $(function(){

            $('textarea').autosize();

            $.maxlength.setDefaults({
                feedbackText : 'Осталось символов {r} ({m} максимальное кол-во)',
                overflowText : '{o} - слишком большое кол-во символов ({m} максимальное кол-во)'
            });

            $('.maxlength').each(function(){
                $(this).maxlength($(this).data());
            });

        });
    </script>

{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" type="txt/css" href="/dataTables/dataTables.bootstrap.css">

    <link rel="stylesheet" type="txt/css" href="/bundles/weastyadmin/inspinia/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="txt/css" href="/bundles/weastyadmin/inspinia/css/animate.css">
    <link rel="stylesheet" type="txt/css" href="/bundles/weastyadmin/inspinia/css/style.min.css">
{% endblock %}

{% block javascripts %}

    <script src="/js/isotope/isotope.pkgd.min.js"></script>

    <!-- Mainly scripts -->
    <script src="/bundles/weastyadmin/inspinia/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/bundles/weastyadmin/inspinia/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    {#<script src="/bundles/weastyadmin/inspinia/js/inspinia.js"></script>#}
    {#<script src="/bundles/weastyadmin/inspinia/js/plugins/pace/pace.min.js"></script>#}

    <script src="/dataTables/jquery.dataTables.min.js"></script>
    <script src="/dataTables/dataTables.bootstrap.js"></script>
    <script src="/dataTables/jquery.dataTables.config.js"></script>

    {{ parent() }}
{% endblock %}
